<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Printable Sticky Note PDF Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- HTML Meta Tags -->
  <meta name="description" content="Generate perfectly aligned PDFs to print text on your sticky notes.">

  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#F3F4F6" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#0A0A0A" media="(prefers-color-scheme: dark)">


  <!-- Facebook Meta Tags -->
  <meta property="og:url" content="https://stickyprinter.app">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Printable Sticky Note PDF Generator">
  <meta property="og:description" content="Generate perfectly aligned PDFs to print text on your sticky notes.">
  <meta property="og:image" content="/og_image.png">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="stickyprinter.app">
  <meta property="twitter:url" content="https://stickyprinter.app">
  <meta name="twitter:title" content="Printable Sticky Note PDF Generator">
  <meta name="twitter:description" content="Generate perfectly aligned PDFs to print text on your sticky notes.">
  <meta name="twitter:image" content="/og_image.png">

  <!-- Favicon: official Material 'note_stack' path, white on black -->
  <link rel="icon" type="image/svg+xml"
    href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%23000'/%3E%3Csvg x='8' y='8' width='48' height='48' viewBox='0 -960 960 960' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%23FFFFFF' d='M280-160v-441q0-33 24-56t57-23h439q33 0 56.5 23.5T880-600v320L680-80H360q-33 0-56.5-23.5T280-160ZM81-710q-6-33 13-59.5t52-32.5l434-77q33-6 59.5 13t32.5 52l10 54h-82l-7-40-433 77 40 226v279q-16-9-27.5-24T158-276L81-710Zm279 110v440h280v-160h160v-280H360Zm220 220Z'/%3E%3C/svg%3E%3C/svg%3E" />

  <!-- Standard favicon for most browsers -->
  <link rel="icon" type="image/png" href="/favicon-32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-192.png" sizes="192x192">

  <!-- Apple Touch Icon for iOS Safari -->
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">

  <!-- iOS Home Screen -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Sticky Printer">

  <!-- Inter SemiBold + Material Symbols -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" />
  <style>
    :root{
      --bg:#fff;--panel:#f7f7f9;--ink:#0a0a0a;--muted:#666a73;--blue:#2563eb;--blue-dark:#337cf2;
      --red:#dc2626;--green:#059669;--border:#e7e7ee;--input:#fff
    }
    @media (prefers-color-scheme: dark){
      :root{--bg:#0a0a0a;--panel:#111214;--ink:#f3f4f6;--muted:#a1a1aa;--blue:var(--blue-dark);--border:#23262d;--input:#0f1115}
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Inter",sans-serif}
    header{display:flex;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid var(--border);position:sticky;top:0;z-index:10;background:linear-gradient(180deg,#0000,var(--bg))}
    .brand{width:40px;height:40px;display:grid;place-items:center}
    .brand .material-symbols-rounded{font-size:24px;color:var(--ink)}
    .head{display:flex;flex-direction:column}
    h1{font-size:18px;margin:0;font-weight:700;letter-spacing:.2px}
    .sub{color:var(--muted);font-size:13px;margin-top:2px}

    .wrap{display:grid;grid-template-columns:340px 1fr;gap:16px;padding:16px;align-items:start}
    @media (max-width:980px){.wrap{grid-template-columns:1fr}}
    .stack{display:grid;gap:12px;align-content:start}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:12px;padding:14px;align-self:start}
    .card h2{font-size:14px;margin:0 0 10px;letter-spacing:.2px}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:10px}
    label{font-size:13px;color:var(--muted)}
    select{background:var(--input);color:var(--ink);border:1px solid var(--border);border-radius:10px;padding:8px 10px;font-size:14px;outline:none}

    /* Buttons */
    button.primary{
      border:1px solid transparent;padding:10px 14px;border-radius:10px;cursor:pointer;background:#171717;color:#FAFAFA;font-weight:700;font-size:14px;
      display:inline-flex;align-items:center;gap:8px;justify-content:center
    }
    button.primary[disabled]{opacity:.55;cursor:not-allowed}
    button.secondary{
      background:#f3f3f5;color:#444;border:1px solid #d9d9df;border-radius:10px;padding:10px 14px;font-weight:700;font-size:14px;cursor:pointer
    }
    @media (prefers-color-scheme: dark){
      button.secondary{background:#1a1b1e;color:#e5e7eb;border-color:#2a2d33}
      button.primary{background: #FAFAFA;color:#1a1b1e;}
    }
    button.secondary[disabled]{opacity:.55;cursor:not-allowed}

    /* File upload */
    .file-upload{position:relative;display:inline-block}
    .file-upload input[type="file"]{position:absolute;left:0;top:0;opacity:0;width:100%;height:100%;cursor:pointer}
    .file-upload label{background:var(--input);border:1px solid var(--border);border-radius:10px;padding:8px 10px;font-size:14px;color:var(--ink);cursor:pointer;display:inline-block}
    #fileArea{display:block;margin-top:4px}
    #loadStatus{display:none;margin-top:4px}
    .file-name{display:inline-flex;align-items:center;gap:6px;font-size:12px;color:var(--muted)}
    .file-clear{
      background:transparent;border:none;padding:0;margin:0;cursor:pointer;display:inline-grid;place-items:center;
      width:18px;height:18px;border-radius:4px;color:var(--red);appearance:none;-webkit-appearance:none;
    }
    .file-clear:focus-visible{outline:2px solid var(--red);outline-offset:2px}

    /* Small text buttons in notes header */
    .mini{background:transparent;border:none;padding:0;font:inherit;cursor:pointer;font-weight:600;font-size:13px;letter-spacing:.2px;color:var(--muted)}
    .mini.danger{color:var(--red)}

    /* Segmented control (32x28, 16px icons) */
    .segA{display:inline-flex;gap:3px;padding:3px;border-radius:10px;background:#f7f7f7;border:1px solid #d9d9d9}
    @media (prefers-color-scheme: dark){ .segA{background:#141518;border-color:#2a2d33} }
    .segA button{display:inline-grid;place-items:center;width:32px;height:28px;border-radius:8px;border:1px solid transparent;background:transparent;color:#6b6b6b;cursor:pointer}
    .segA button.active{background:#cfcfcf;border-color:#bdbdbd;color:#111}
    .segA button:hover{background:#efefef;color:#111}
    .segA .material-symbols-rounded{font-size:16px}
    .segA button:focus-visible{outline:2px solid #9a9a9a;outline-offset:2px}

    .card-header{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:10px}
    .card-header-right{display:flex;gap:14px;align-items:center}
    .notes{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    @media (max-width:980px){.notes{grid-template-columns:1fr 1fr}}
    @media (max-width:640px){.notes{grid-template-columns:1fr}}
    .note{display:grid;gap:6px;padding:10px;border:1px dashed var(--border);border-radius:10px;background:var(--input)}
    .note textarea{
      width:100%;min-height:38px;resize:none;overflow:hidden;background:var(--bg);color:var(--ink);
      border:1px solid var(--border);border-radius:8px;padding:8px;font-size:14px;line-height:1.4
    }
    .note-meta{display:flex;justify-content:space-between;align-items:center;font-size:12px;color:var(--muted)}
    .ok{color:var(--muted)} .warn{color:var(--red)}
    .adder{display:grid;place-items:center;padding:16px;min-height:72px;border-radius:10px;border:1px dashed var(--border);background:var(--input);cursor:pointer}
    .adder button{background:transparent;border:none;padding:0;font:inherit;color:var(--muted);font-weight:800;font-size:13px;letter-spacing:.2px;cursor:pointer}
    .foot{display:flex;gap:10px;justify-content:space-between;border-top:1px solid var(--border);padding-top:12px;margin-top:12px}

    .gen-row{grid-column:1 / -1;display:flex}
    .gen-row .primary{width:100%}

    hr{border:0;border-top:1px solid var(--border);margin:12px 0 0}
    footer{padding:14px 16px}
    @media (min-width:1024px){ footer{padding-left:32px;padding-right:32px} }
    footer .row{display:flex;justify-content:space-between;align-items:center;margin:0}
    .mini-brand{width:28px;height:28px;display:grid;place-items:center}
    .mini-brand .material-symbols-rounded{font-size:18px;color:var(--ink)}
    .footer-text{font-size:12px;color:var(--muted);display:flex;align-items:center;gap:8px}
    .footer-strong{font-weight:600;color:var(--ink)}
    .success{font-size:13px;color:var(--green);font-weight:700}
    
    /* Liquid glass header on larger screens with subtle fade-in on scroll */
    @media (min-width: 641px) {
      header{
        position: sticky;
        top: 0;
        z-index: 100;
        /* start more transparent at the top; fade in when scrolled */
        background-color: rgba(255,255,255,0.35);
        backdrop-filter: blur(0px);
        -webkit-backdrop-filter: blur(0px);
        border-bottom: 1px solid rgba(0,0,0,0.05);
        transition: background-color .25s ease, backdrop-filter .25s ease, box-shadow .25s ease, border-color .25s ease;
      }
      header.scrolled{
        background-color: rgba(255,255,255,0.7);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.06);
        border-bottom-color: rgba(0,0,0,0.08);
      }

      /* Dark mode glass */
      @media (prefers-color-scheme: dark) {
        header{
          background-color: rgba(18,18,18,0.25);
          border-bottom-color: rgba(255,255,255,0.06);
        }
        header.scrolled{
          background-color: rgba(18,18,18,0.1);
          box-shadow: 0 6px 20px rgba(0,0,0,0.35);
          border-bottom-color: rgba(255,255,255,0.12);
        }
      }
    }

    /* Mobile header: sticky + liquid glass + smooth shrink */
    @media (max-width: 640px){
      header{
        position: sticky;
        top: 0;
        z-index: 100;
        padding: 10px 12px; /* a touch more to smooth the transition */
        border-bottom: 1px solid var(--border);

        /* liquid glass */
        background-color: rgba(255,255,255,0.35);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);

        /* smoother animation */
        transition:
          padding .28s cubic-bezier(.25,.8,.25,1),
          background-color .28s cubic-bezier(.25,.8,.25,1),
          backdrop-filter .28s cubic-bezier(.25,.8,.25,1),
          -webkit-backdrop-filter .28s cubic-bezier(.25,.8,.25,1),
          border-color .28s ease,
          box-shadow .28s ease;
        will-change: padding, backdrop-filter, background-color;
      }
      /* dark mode glass */
      @media (prefers-color-scheme: dark){
        header{
          background-color: rgba(18,18,18,0.35);
          border-bottom-color: rgba(255,255,255,0.08);
        }
      }

      /* hide subheader on mobile */
      header .sub{ display:none; }

      /* base sizes at top */
      header .brand{ width:34px; height:34px; transition: width .28s, height .28s; }
      header .brand .material-symbols-rounded{ font-size:20px; transition: font-size .28s; }
      header h1{ font-size:16px; transition: font-size .28s; }

      /* scrolled (compact) */
      header.scrolled{
        padding: 6px 10px;
        background-color: rgba(255,255,255,0.1);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.06);
      }
      @media (prefers-color-scheme: dark){
        header.scrolled{
          background-color: rgba(18,18,18,0.1);
          box-shadow: 0 6px 20px rgba(0,0,0,0.35);
        }
      }
      header.scrolled .brand{ width:28px; height:28px; }
      header.scrolled .brand .material-symbols-rounded{ font-size:18px; }
      header.scrolled h1{ font-size:15px; }
    }



    /* Footer link */
    .footer-link{
      font-size:12px;
      font-weight:600;
      color:var(--muted);
      text-decoration:none;
      display:flex;
      align-items:center;
      gap:6px;
    }
    .footer-link:hover{ text-decoration:underline; }
    
    /* Segmented size picker */
    .sizeSeg { display:inline-flex; gap:6px; align-items:center; }
    .sizeSeg .seg {
      display:inline-flex; gap:4px; padding:3px;
      border:1px solid var(--border); border-radius:10px; background:#f7f7f7;
    }
    @media (prefers-color-scheme: dark){
      .sizeSeg .seg{ background:#141518; border-color:#2a2d33 }
    }
    .sizeSeg .seg button{
      min-width:64px; height:40px; padding:2px 4px;
      border-radius:8px; border:1px solid transparent;
      background:transparent; color:var(--ink);
      font-size:13px; font-weight:600; /* heavier for main labels */
      cursor:pointer;
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      line-height:1.3;
    }

    /* special case for Auto: center it vertically */
    .sizeSeg .seg button[data-size="auto"]{
      flex-direction:row; /* text centered horizontally & vertically */
      font-weight:600;
    }

    /* sub-label (pt size) lighter weight */
    .sizeSeg .seg button span.sub{
      font-size:12px;
      font-weight:400; /* old weight */
      color:inherit;
      margin-top:-1px;
    }
    .sizeSeg .seg button.active{
      background:#cfcfcf; color:#111; border-color:#bdbdbd;
    }
    #sizeRow, #alignRow {
      gap: 6px; /* space between label and control */
    }
    
    /* Container + list */
    .noteSizeRadio { display:flex; flex-direction:column; gap:10px; margin-top:10px; }
    .noteSizeRadio h3{ margin:0; font-size:13px; line-height:16px; font-weight:600; color:var(--ink); }
    .opts-radio{
      display:flex; flex-wrap:wrap; gap:8px;
      width:308px; max-width:100%; /* per spec: 308px, responsive-safe */
      /* height:232px;  (skip hard height so it can wrap naturally) */
    }

    /* Option row */
    .noteOptRadio{
      position:relative;
      display:flex; align-items:center; justify-content:flex-start;
      width:266px; max-width:100%;
      height:52px; padding:0 8px; /* right padding ensures radio is 8px from edge */
      border-radius:4px; border:1px solid; cursor:pointer; user-select:none;
      background:#141518; color:#fff; /* dark baseline */
      gap:0; /* layout controlled by child gaps */
    }

    /* Left side: icon box (32) + 12px gap + text */
    .noteOptRadio .left{
      display:flex; align-items:center; gap:12px; height:32px;
      margin-left:0; /* we’ll place icon itself 8px from edge */
    }
    .noteOptRadio .icon{
      width:32px; height:32px;
      display:flex; align-items:center; justify-content:center;
      margin-left:8px; /* icon container is 8px from left edge */
    }
    .noteOptRadio .icon svg{ display:none; width:auto; height:auto; }

    /* Show the right SVG per color scheme */
    @media (prefers-color-scheme: light){
      .noteOptRadio .icon svg.light{ display:block; }
    }
    @media (prefers-color-scheme: dark){
      .noteOptRadio .icon svg.dark{ display:block; }
    }

    /* Text block next to icon */
    .noteOptRadio .txt{ display:flex; flex-direction:column; gap:2px; text-align: left;;}
    .noteOptRadio .txt .label{ font-size:13px; line-height:16px; font-weight:600; color:inherit; }
    .noteOptRadio .txt .size { font-size:11px; line-height:13px; font-weight:500; color:inherit; }

    /* Radio indicator: ALWAYS 8px from the right, vertically centered */
    .noteOptRadio .radio{
      position:absolute; right:8px; top:50%; transform:translateY(-50%);
      width:14px; height:14px; display:grid; place-items:center; isolation:isolate;
    }
    .noteOptRadio .radio .outer{
      position:absolute; inset:0; border:1px solid #2B2D32; background:#FFFFFF; border-radius:50%;
    }
    .noteOptRadio .radio .inner{
      width:5px; height:5px; border-radius:50%; transform:scale(0); transition:transform .12s ease;
      background:#2B2D32; z-index:1;
    }

    /* Dark mode default + selected */
    @media (prefers-color-scheme: dark){
      .noteOptRadio{ background:#141518; border-color:#2B2D32; color:#fff; }
      .noteOptRadio[aria-checked="true"]{
        background:linear-gradient(0deg, rgba(255,255,255,0.05), rgba(255,255,255,0.05)), #141518;
        border-color:#BEBEBE; color:#fff;
      }
      .noteOptRadio[aria-checked="true"] .radio .inner{ transform:scale(1); background:#2B2D32; }
    }

    /* Light mode default + selected */
    @media (prefers-color-scheme: light){
      .noteOptRadio{ background:#ffffff; border-color:#E7E7EE; color:var(--ink); }
      .noteOptRadio[aria-checked="true"]{
        background:linear-gradient(0deg, rgba(0,0,0,0.02), rgba(0,0,0,0.02)), #f0f0f0; 
        border-color:#111; color:#111;
      }
      .noteOptRadio .radio .outer{ background:#FFFFFF; border-color:#2B2D32; }
      .noteOptRadio[aria-checked="true"] .radio .inner{ transform:scale(1); background:#111; }
    }

    /* Focus */
    .noteOptRadio:focus-visible{ outline:2px solid var(--blue); outline-offset:2px; }



    /* 1) Make entry fields 16px (prevents iOS zoom, nicer legibility) */
    .note textarea{
      font-size:16px; /* was 14px */
      line-height:1.4; /* keep your current rhythm */
    }

    /* Text align segmented control */
    @media (prefers-color-scheme: light){
      .segA button.active{
        background:#111;      /* near‑black */
        border-color:#111;
        color:#fff;           /* white text */
      }
    }

    /* Text size segmented control */
    @media (prefers-color-scheme: light){
      .sizeSeg .seg button.active{
        background:#111;
        border-color:#111;
        color:#fff;
      }
    }


    /* Consistent focus highlight for entry fields (inputs + textareas) */
    input[type="text"],
    input[type="search"],
    input[type="email"],
    input[type="url"],
    input[type="number"],
    textarea {
      outline: none;
      box-shadow: none;
      transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease;
    }

    /* Base border */
    input[type="text"],
    input[type="search"],
    input[type="email"],
    input[type="url"],
    input[type="number"],
    textarea {
      border: 1px solid var(--border);
      background: var(--input);
      color: var(--ink);
      outline: none;

    }

    /* LIGHT MODE: black focus ring */
    @media (prefers-color-scheme: light) {
      input[type="text"]:focus-visible,
      input[type="search"]:focus-visible,
      input[type="email"]:focus-visible,
      input[type="url"]:focus-visible,
      input[type="number"]:focus-visible,
      textarea:focus-visible {
        border-color: #0A0A0A;
        outline: 1px solid #0A0A0A;
      }
    }

    /* DARK MODE: white focus ring (#F3F4F6) */
    @media (prefers-color-scheme: dark) {
      input[type="text"]:focus-visible,
      input[type="search"]:focus-visible,
      input[type="email"]:focus-visible,
      input[type="url"]:focus-visible,
      input[type="number"]:focus-visible,
      textarea:focus-visible {
        border-color: #F3F4F6;
        outline: 1px solid #F3F4F6;     
      }
    }

    /* Override Chrome/Safari autofill yellow/blue background so our highlight wins */
    input:-webkit-autofill,
    textarea:-webkit-autofill {
      -webkit-text-fill-color: var(--ink);
      transition: background-color 9999s ease-out, color 9999s ease-out; /* trick to suppress tint flash */
    }
    @media (prefers-color-scheme: light) {
      input:-webkit-autofill,
      textarea:-webkit-autofill {
        box-shadow: 0 0 0px 1000px var(--input) inset;           /* keep your field bg */
        border: 1px solid #0A0A0A;                               /* match light focus */
      }
    }
    @media (prefers-color-scheme: dark) {
      input:-webkit-autofill,
      textarea:-webkit-autofill {
        box-shadow: 0 0 0px 1000px var(--input) inset;
        border: 1px solid #F3F4F6;                               /* match dark focus */
      }
    }
    
    @media (prefers-color-scheme: light) { textarea, input { caret-color:#0A0A0A; } }
    @media (prefers-color-scheme: dark)  { textarea, input { caret-color:#F3F4F6; } }

    /* Improve tap highlight on iOS */
    * { -webkit-tap-highlight-color: rgba(0,0,0,0); }


  </style>
</head>
<body>
  <header>
    <div class="brand"><span class="material-symbols-rounded" aria-hidden="true">note_stack</span></div>
    <div class="head">
      <h1>stickyprinter.app</h1>
      <div class="sub">Generate perfectly aligned PDFs to print text on your sticky notes. Create notes individually or import multiple notes via CSV file.</div>
    </div>
  </header>

  <div class="wrap">
    <!-- Left column -->
    <div class="stack">
      <div class="card">
        <h2>Settings</h2>
          <div class="row" id="sizeRow" style="flex-direction:column; align-items:flex-start;">
            <span style="font-size:13px;color:var(--muted);margin-bottom:4px;">Text size</span>

            <!-- hidden select kept for logic -->
            <select id="size" style="display:none">
              <option value="20">Small (20pt)</option>
              <option value="24">Standard (24pt)</option>
              <option value="36">Huge (36pt)</option>
              <option value="auto" selected>Auto (largest possible)</option>
            </select>

            <!-- segmented control -->
            <div class="sizeSeg" role="group" aria-label="Text size">
              <div class="seg" id="sizeSeg">
                <button type="button" data-size="auto" class="active">Auto</button>
                <button type="button" data-size="20">Small<span class="sub">20 pt</span></button>
                <button type="button" data-size="24">Standard<span class="sub">24 pt</span></button>
                <button type="button" data-size="36">Huge<span class="sub">36 pt</span></button>
              </div>
            </div>
          </div>

        <div class="row" id="alignRow" style="flex-direction:column; align-items:flex-start;">
          <span style="font-size:13px;color:var(--muted);">Text align</span>
          <div class="segA" id="alignSeg" role="group" aria-label="Text alignment">
            <button type="button" aria-pressed="false" data-value="left"  title="Left"><span class="material-symbols-rounded">format_align_left</span></button>
            <button type="button" aria-pressed="true"  data-value="center" title="Center" class="active"><span class="material-symbols-rounded">format_align_center</span></button>
            <button type="button" aria-pressed="false" data-value="right" title="Right"><span class="material-symbols-rounded">format_align_right</span></button>
          </div>
        </div>
       <div class="noteSizeRadio" id="noteSize">
     <div class="noteSizeRadio" id="noteSize">
  <span style="font-size:13px;color:var(--muted);margin-bottom:4px;">Sticky note size</span>
  <div class="opts-radio" role="radiogroup" aria-label="Sticky note size">

    <!-- Classic 3×3” (default selected) -->
    <button type="button" class="noteOptRadio" data-size="3x3" role="radio" aria-checked="true">
      <div class="left">
        <div class="icon" aria-hidden="true">
          <!-- Dark -->
          <svg class="dark" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0.246154 0.366412L16 0V13.0687L13.0462 16H0L0.246154 0.366412Z" fill="#D9D9D9"/>
            <path d="M13.0462 13.0687H16L13.0462 16V13.0687Z" fill="#909090"/>
          </svg>
          <!-- Light -->
          <svg class="light" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0.246154 0.366412L16 0V13.0687L13.0462 16H0L0.246154 0.366412Z" fill="#111214"/>
            <path d="M13.0462 13.0687H16L13.0462 16V13.0687Z" fill="#909090" fill-opacity="0.2"/>
          </svg>
        </div>
        <div class="txt">
          <div class="label">Classic</div>
          <div class="size">3×3”</div>
        </div>
      </div>
      <div class="radio" aria-hidden="true"><span class="outer"></span><span class="inner"></span></div>
    </button>

    <!-- Rectangle 3×5” -->
    <button type="button" class="noteOptRadio" data-size="3x5" role="radio" aria-checked="false">
      <div class="left">
        <div class="icon" aria-hidden="true">
          <!-- Dark -->
          <svg class="dark" width="22" height="16" viewBox="0 0 22 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0.246154 0.366412L22 0V13.0687L19.0462 16H0L0.246154 0.366412Z" fill="#D9D9D9"/>
            <path d="M19.0462 13.0687H22L19.0462 16V13.0687Z" fill="#909090"/>
          </svg>
          <!-- Light -->
          <svg class="light" width="22" height="16" viewBox="0 0 22 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0.246154 0.366412L22 0V13.0687L19.0462 16H0L0.246154 0.366412Z" fill="#111214"/>
            <path d="M19.0462 13.0687H22L19.0462 16V13.0687Z" fill="#909090" fill-opacity="0.2"/>
          </svg>
        </div>
        <div class="txt">
          <div class="label">Rectangle</div>
          <div class="size">3×5”</div>
        </div>
      </div>
      <div class="radio" aria-hidden="true"><span class="outer"></span><span class="inner"></span></div>
    </button>

    <!-- Large 4×4” -->
    <button type="button" class="noteOptRadio" data-size="4x4" role="radio" aria-checked="false">
      <div class="left">
        <div class="icon" aria-hidden="true">
          <!-- Dark -->
          <svg class="dark" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0.338462 0.503817L22 0V17.9695L17.9385 22H0L0.338462 0.503817Z" fill="#D9D9D9"/>
            <path d="M17.9385 17.9695H22L17.9385 22V17.9695Z" fill="#909090"/>
          </svg>
          <!-- Light -->
          <svg class="light" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0.338462 0.503817L22 0V17.9695L17.9385 22H0L0.338462 0.503817Z" fill="#111214"/>
            <path d="M17.9385 17.9695H22L17.9385 22V17.9695Z" fill="#909090" fill-opacity="0.2"/>
          </svg>
        </div>
        <div class="txt">
          <div class="label">Large</div>
          <div class="size">4×4”</div>
        </div>
      </div>
      <div class="radio" aria-hidden="true"><span class="outer"></span><span class="inner"></span></div>
    </button>

    <!-- Large Rectangle 4×6” -->
    <button type="button" class="noteOptRadio" data-size="4x6" role="radio" aria-checked="false">
      <div class="left">
        <div class="icon" aria-hidden="true">
          <!-- Dark -->
          <svg class="dark" width="32" height="22" viewBox="0 0 32 22" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0.338462 0.503817L32 0V17.9695L27.9385 22H0L0.338462 0.503817Z" fill="#D9D9D9"/>
            <path d="M27.9385 17.9695H32L27.9385 22V17.9695Z" fill="#909090"/>
          </svg>
          <!-- Light -->
          <svg class="light" width="32" height="22" viewBox="0 0 32 22" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0.338462 0.503817L32 0V17.9695L27.9385 22H0L0.338462 0.503817Z" fill="#111214"/>
            <path d="M27.9385 17.9695H32L27.9385 22V17.9695Z" fill="#909090" fill-opacity="0.2"/>
          </svg>
        </div>
        <div class="txt">
          <div class="label">Large Rectangle</div>
          <div class="size">4×6”</div>
        </div>
      </div>
      <div class="radio" aria-hidden="true"><span class="outer"></span><span class="inner"></span></div>
    </button>

  </div>
</div>

    </div>

    </div>

      <div class="card">
        <h2>CSV Import</h2>
        <div class="row">
          <div class="file-upload">
            <label for="csv">Choose CSV file</label>
            <input type="file" id="csv" accept=".csv,text/csv" />
          </div>
          <span id="fileArea" aria-live="polite"></span>
        </div>
        <div class="row"><label><input type="checkbox" id="omitHeader" /> Omit first row</label></div>

        <div class="row" id="loadControls">
          <button id="loadCsv" class="secondary" disabled title="Choose a CSV file to enable loading">Load CSV</button>
          <span id="loadStatus" class="success"></span>
        </div>
      </div>

      <!-- Generate button (full width + icon) -->
      <div class="gen-row">
        <button id="gen" class="primary"><span class="material-symbols-rounded" aria-hidden="true">download</span>Generate PDF</button>
      </div>

      <div class="card">
        <details id="inst" style="font-size:13px;color:var(--muted);line-height:1.5" closed>
          <summary style="cursor:pointer;font-weight:800;color:var(--ink)">Instructions</summary>
          <ul id="instList" style="margin:8px 0 0 18px;padding:0">
            <li>Type your sticky notes here, or upload a CSV (each cell becomes one note).</li>
            <li>Select <strong>Generate PDF</strong> to make your printable notes file.</li>
            <li>
              Download and print the <a id="placementGuideLink" href="/templates/3x3-sticky-placement.pdf" target="_blank" rel="noopener" style="color:inherit;text-decoration:underline;">placement guide</a>.
              You’ll need <strong><span id="guidesCount">1</span> placement guide(s)</strong> for your 
              <span id="notesSoFar">0</span> notes.
            </li>
            <li>Stick your 3×3" sticky notes inside the boxes on the placement guide.</li>
            <li>Put those guide pages into your printer’s paper tray or bypass tray. Test print a single page to make sure the orientation is correct.</li>
            <li>Print your generated PDF and enjoy your crisply printed sticky notes!</li>
          </ul>
        </details>
      </div>
    </div>

    <!-- Right column -->
    <div class="card" style="align-self:start">
      <div class="card-header">
        <h2 style="margin:0;">Sticky Notes</h2>
        <div class="card-header-right">
          <button id="createSample" class="mini">Create sample</button>
          <button id="deleteAll" class="mini danger">Delete all</button>
        </div>
      </div>

      <div class="notes" id="notes"></div>

      <div class="foot">
        <span style="font-size:12px;color:var(--muted);" id="countMeta">0 / 300 notes</span>
      </div>
    </div>
  </div>

  <hr>
  <footer>
    <div class="row">
      <div class="footer-text">
        <div class="mini-brand"><span class="material-symbols-rounded" aria-hidden="true">note_stack</span></div>
        <span class="footer-strong">stickyprinter.app</span>
      </div>
      <a class="footer-link" href="https://github.com/evanrussell/stickyprinter" rel="noopener">
        GitHub
      </a>
    </div>
  </footer>


  <!-- libs -->
  <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
  <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js"></script>

  <script>
  const LIMITS={"20":72,"24":56,"32":30,"36":20,"auto":72};
  const MAX_NOTES=300;

  // Letter page
  const PT = 72, PAGE = { w: 8.5 * PT, h: 11 * PT };

  // Layout specs per size
  const LAYOUTS = {
    "3x3": {
      sticky: { w: 3 * PT, h: 3 * PT },                // 216 × 216
      margins: { left: 54, right: 54, top: 36, bottom: 36 },
      gap: { col: 72, row: 36 },
      columns: 2, rows: 3, perPage: 6
    },
    "3x5": {
      sticky: { w: 360, h: 216 },
      margins: { left: 126, right: 126, top: 36, bottom: 36 },
      gap: { col: 0, row: 36 },
      columns: 1, rows: 3, perPage: 3
    },
    "4x4": {
      sticky: { w: 288, h: 288 },
      margins: { left: 162, right: 162, top: 72, bottom: 72 },
      gap: { col: 0, row: 72 },
      columns: 1, rows: 2, perPage: 2
    },
    "4x6": {
      sticky: { w: 432, h: 288 },
      margins: { left: 90, right: 90, top: 72, bottom: 72 },
      gap: { col: 0, row: 72 },
      columns: 1, rows: 2, perPage: 2
    }
  };

  const INNER_PAD = 10;

  function slotRectsFor(sizeKey){
    const L = LAYOUTS[sizeKey] || LAYOUTS["3x3"];
    const rects = [];
    for(let r = L.rows - 1; r >= 0; r--){
      for(let c = 0; c < L.columns; c++){
        const x = L.margins.left + c * (L.sticky.w + (L.gap.col || 0));
        const y = L.margins.bottom + r * (L.sticky.h + L.gap.row);
        rects.push({ x, y, w: L.sticky.w, h: L.sticky.h });
      }
    }
    return rects;
  }


  // --- UI state ---
  const notesEl=document.getElementById('notes');
  const countMeta=document.getElementById('countMeta');
  const guidesCountEl=document.getElementById('guidesCount');
  const notesSoFarEl=document.getElementById('notesSoFar');
  const inputs=[]; let adderEl=null;
  let alignMode='center';

  // segmented control
  const segA=document.getElementById('alignSeg');
  segA.querySelectorAll('button').forEach(btn=>{
    btn.addEventListener('click',()=>{
      segA.querySelectorAll('button').forEach(x=>{x.classList.remove('active');x.setAttribute('aria-pressed','false')});
      btn.classList.add('active'); btn.setAttribute('aria-pressed','true');
      alignMode=btn.dataset.value;
    });
  });

  function updateGuidesHint(){
    const n=inputs.length;
    const pages=Math.ceil(n/6)||0;
    guidesCountEl.textContent=pages;
    notesSoFarEl.textContent=n;
  }

  function updateCountMeta(){
    countMeta.textContent = `${inputs.length} / ${MAX_NOTES} notes`;
    updateGuidesHint();
  }

  function renumber(){ inputs.forEach((n,i)=> n.numEl.textContent=`#${i+1}`); updateCountMeta(); }
  function currentCharLimit(){ return LIMITS[document.getElementById('size').value]||72; }
  function autoResizeTA(ta){ ta.style.height='auto'; ta.style.height=(ta.scrollHeight)+'px'; }

  function createAdder(){
    const card=document.createElement('div'); card.className='adder';
    const btn=document.createElement('button'); btn.type='button'; btn.textContent='+ Sticky Note';
    const add=()=>addNote('');
    btn.addEventListener('click',add);
    card.addEventListener('click', (e)=>{ if(e.target!==btn) add(); }); // whole container clickable
    card.appendChild(btn);
    return card;
  }
  function placeAdder(){
    if(!adderEl) adderEl=createAdder();
    if(adderEl.parentNode) adderEl.parentNode.removeChild(adderEl);
    if(inputs.length<MAX_NOTES) notesEl.appendChild(adderEl);
  }

  function addNote(value=''){
    if(inputs.length>=MAX_NOTES) return;
    const wrap=document.createElement('div'); wrap.className='note';
    const ta=document.createElement('textarea');
    ta.placeholder=`Sticky note ${inputs.length+1}`; ta.value=value; ta.maxLength=currentCharLimit(); autoResizeTA(ta);

    const meta=document.createElement('div'); meta.className='note-meta';
    const num=document.createElement('span'); const cnt=document.createElement('span');
    num.textContent=`#${inputs.length+1}`;
    cnt.textContent=`${(value||'').length} / ${currentCharLimit()}`; cnt.className=((value||'').length>=currentCharLimit())?'warn':'ok';
    meta.appendChild(num); meta.appendChild(cnt);

    ta.addEventListener('input',()=>{
      ta.maxLength=currentCharLimit(); autoResizeTA(ta);
      const n=ta.value.length, max=ta.maxLength; cnt.textContent=`${n} / ${max}`; cnt.className=(n>=max)?'warn':'ok';
    });

    const node={wrap,input:ta,countEl:cnt,numEl:num};
    wrap.appendChild(ta); wrap.appendChild(meta); notesEl.appendChild(wrap);
    inputs.push(node); ta.dispatchEvent(new Event('input')); renumber(); placeAdder();
  }

  function removeAllNotes(){ inputs.forEach(n=>n.wrap.remove()); inputs.length=0; updateCountMeta(); }
  function clearToSixBlank(){
    removeAllNotes(); for(let i=0;i<6;i++) addNote('');
    placeAdder();
    clearCsvSelection();
  }

  // init
  for(let i=0;i<6;i++) addNote(''); placeAdder();

  const GUIDE_LINKS = {
  "3x3": "/templates/3x3-sticky-placement-guide.pdf",
  "3x5": "/templates/3x5-sticky-placement-guide.pdf",
  "4x4": "/templates/4x4-sticky-placement-guide.pdf",
  "4x6": "/templates/4x6-sticky-placement-guide.pdf"
};

function updatePlacementGuideLink(){
  const a = document.getElementById('placementGuideLink');
  if(!a) return;
  const key = (window.stickyNoteSize || '3x3');
  a.href = GUIDE_LINKS[key] || GUIDE_LINKS["3x3"];
}

// after your initial setup:
updatePlacementGuideLink();


  (function(){
    // default sticky note size
    window.stickyNoteSize = '3x3';

    const group = document.querySelector('#noteSize .opts-radio');
    if(!group) return;

    function setSize(val){
      window.stickyNoteSize = val;
      updateGuidesHint();
      updatePlacementGuideLink && updatePlacementGuideLink();

      group.querySelectorAll('[role="radio"]').forEach(el=>{
        const checked = el.getAttribute('data-size')===val;
        el.setAttribute('aria-checked', checked ? 'true' : 'false');
      });
    }

    group.addEventListener('click', (e)=>{
      const btn = e.target.closest('[role="radio"]');
      if(!btn) return;
      setSize(btn.dataset.size);
    });

    // Arrow-key navigation (optional but nice)
    group.addEventListener('keydown', (e)=>{
      const items = Array.from(group.querySelectorAll('[role="radio"]'));
      const cur = items.findIndex(el => el.getAttribute('aria-checked')==='true');
      if(cur < 0) return;
      let next = cur;
      if(e.key==='ArrowRight' || e.key==='ArrowDown') next = Math.min(items.length-1, cur+1);
      if(e.key==='ArrowLeft'  || e.key==='ArrowUp')   next = Math.max(0, cur-1);
      if(next!==cur){ e.preventDefault(); items[next].focus(); setSize(items[next].dataset.size); }
    });
  })();


  // header actions
  document.getElementById('deleteAll').addEventListener('click',clearToSixBlank);
  document.getElementById('createSample').addEventListener('click',()=>{ removeAllNotes(); for(let i=1;i<=12;i++) addNote(`Sample note #${i}`); placeAdder(); });

  (function(){
    const seg = document.getElementById('sizeSeg');
    const selectEl = document.getElementById('size'); // hidden select for existing logic

    function applySize(value){
      // toggle active state
      seg.querySelectorAll('button').forEach(b=>b.classList.toggle('active', b.dataset.size===value));
      // sync hidden select + trigger your existing handlers
      selectEl.value = value;
      selectEl.dispatchEvent(new Event('change', { bubbles:true }));
    }

    // click handling
    seg.addEventListener('click', (e)=>{
      const btn = e.target.closest('button[data-size]');
      if(!btn) return;
      applySize(btn.dataset.size);
    });

    // init from current select value (defaults to 'auto' if unset)
    applySize(selectEl.value || 'auto');
  })();

  // size change
  document.getElementById('size').addEventListener('change',()=>{
    const limit=currentCharLimit();
    inputs.forEach(n=>{
      n.input.maxLength=limit;
      if(n.input.value.length>limit) n.input.value=n.input.value.slice(0,limit);
      const len=n.input.value.length; n.countEl.textContent=`${len} / ${limit}`; n.countEl.className=(len>=limit)?'warn':'ok';
      autoResizeTA(n.input);
    });
  });

  // CSV preview / load
  const csvInput=document.getElementById('csv');
  const fileArea=document.getElementById('fileArea'); // single-line region for filename OR success
  const loadBtn=document.getElementById('loadCsv');
  const loadStatus=document.getElementById('loadStatus');

  function showFilenameLine(file){
    fileArea.style.display='block';
    loadStatus.style.display='none';
    fileArea.innerHTML = '';
    if(!file) return;
    const nameWrap=document.createElement('span'); nameWrap.className='file-name';
    const nameText=document.createElement('span'); nameText.textContent=file.name;
    const clearBtn=document.createElement('button');
    clearBtn.type='button'; clearBtn.className='file-clear'; clearBtn.title='Remove file';
    clearBtn.innerHTML = "<span class='material-symbols-rounded' aria-hidden='true' style='font-size:16px'>close_small</span>";
    clearBtn.addEventListener('click', clearCsvSelection);
    nameWrap.appendChild(nameText); nameWrap.appendChild(clearBtn);
    fileArea.appendChild(nameWrap);
  }

  function showSuccessMessage(fileName, addedCount){
    fileArea.style.display='none';
    loadStatus.textContent = `✓ ${fileName} loaded — ${addedCount} notes added`;
    loadStatus.style.display = 'block';
  }

  function resetLoadUI(){
    loadStatus.style.display='none'; loadStatus.textContent='';
    loadBtn.disabled = !(csvInput.files && csvInput.files.length);
    const file = csvInput.files && csvInput.files[0];
    if(file){ showFilenameLine(file); } else { fileArea.style.display='none'; fileArea.innerHTML=''; }
  }

  function clearCsvSelection(){
    csvInput.value = '';
    fileArea.style.display='none'; fileArea.innerHTML='';
    loadStatus.style.display='none'; loadStatus.textContent='';
    loadBtn.disabled = true;
  }

  csvInput.addEventListener('change',()=>{
    const file=csvInput.files && csvInput.files[0];
    if(file){ showFilenameLine(file); }
    else { clearCsvSelection(); }
    loadBtn.disabled = !file;
  });

  loadBtn.addEventListener('click',()=>{
    const file=csvInput.files && csvInput.files[0];
    const omit=document.getElementById('omitHeader').checked;
    if(!file) return;

    Papa.parse(file,{
      complete:(res)=>{
        // Omit entire first row if requested
        const rows = Array.isArray(res.data) ? res.data.slice() : [];
        if(omit && rows.length){ rows.shift(); }

        const flat=[];
        for(const row of rows){
          const arr = Array.isArray(row) ? row : [row];
          for(const cell of arr){ flat.push((cell??'').toString().trim()); }
        }

        const sliced=flat.slice(0,MAX_NOTES);
        removeAllNotes(); const count=Math.max(6, sliced.length);
        for(let i=0;i<count;i++) addNote(sliced[i]??''); placeAdder();

        const added=Math.min(sliced.length,MAX_NOTES);
        showSuccessMessage(file.name, added);
      },
      error:(err)=>alert('CSV parse error: '+err)
    });
  });

  // Generate PDF
  document.getElementById('gen').addEventListener('click', async () => {
    const { PDFDocument, StandardFonts } = PDFLib;
    const pdf = await PDFDocument.create();

    // Font (unchanged from your version)
    const interBytes = await fetch("https://fonts.gstatic.com/s/inter/v13/UcCO3Fwr0Cwy8O4N4t6hlvZrQ4Y.woff2").then(r=>r.arrayBuffer()).catch(()=>null);
    let font = null;
    if(interBytes){
      try { font = await pdf.embedFont(interBytes, { subset:true }); }
      catch { font = await pdf.embedFont(StandardFonts.HelveticaBold); }
    } else {
      font = await pdf.embedFont(StandardFonts.HelveticaBold);
    }

    // helpers (unchanged)
    function wrapParagraph(text,font,fontSize,maxWidth){
      const words=(text||'').toString().split(/\s+/); const lines=[]; let line='';
      for(const w of words){
        const test=line?line+' '+w:w; const width=font.widthOfTextAtSize(test,fontSize);
        if(width<=maxWidth) line=test;
        else{
          if(line) lines.push(line);
          if(font.widthOfTextAtSize(w,fontSize)>maxWidth){
            let cur=''; for(const ch of w){
              if(font.widthOfTextAtSize(cur+ch,fontSize)<=maxWidth) cur+=ch;
              else{ if(cur) lines.push(cur); cur=ch; }
            } line=cur;
          } else line=w;
        }
      }
      if(line) lines.push(line); return lines;
    }
    function wrapTextByWidthPreserveBreaks(text,font,fontSize,maxWidth){
      const paras=(text||'').toString().split(/\r?\n/); const out=[];
      paras.forEach((p,i)=>{ out.push(...wrapParagraph(p,font,fontSize,maxWidth)); if(i<paras.length-1) out.push(''); }); return out;
    }

    // layout selection
    const sizeKey = (window.stickyNoteSize || '3x3');
    const L = LAYOUTS[sizeKey] || LAYOUTS['3x3'];
    const rects = slotRectsFor(sizeKey);

    // sizing + fit helpers
    function fitsBox(text,font,fontSize){
      const boxW = L.sticky.w - INNER_PAD*2, boxH = L.sticky.h - INNER_PAD*2;
      const lines = wrapTextByWidthPreserveBreaks(text,font,fontSize,boxW);
      const lh = fontSize*1.2;
      return (lines.length*lh) <= boxH;
    }
    function pickAutoSize(text,font){
      // Try from largest down
      const order = [36, 24, 20];
      const t = (text||'').toString().slice(0, 72);
      for(const fs of order) if(fitsBox(t,font,fs)) return { size:fs, text:t };
      return { size:20, text:t };
    }

    const sizeSel = document.getElementById('size').value;
    const all = inputs.map(n=>n.input.value);
    const perPage = L.perPage;

    for(let i=0; i<all.length; i+=perPage){
      const page = pdf.addPage([PAGE.w, PAGE.h]);
      const notes = all.slice(i, i+perPage);

      notes.forEach((text, idx) => {
        const box = rects[idx];
        let t = (text ?? '').toString();
        if(t.length === 0) return;

        let fs = sizeSel === 'auto' ? null : parseInt(sizeSel, 10);
        const cap = LIMITS[sizeSel] || 72;
        t = t.slice(0, cap);

        if(sizeSel === 'auto'){ const pick = pickAutoSize(t, font); fs = pick.size; t = pick.text; }
        else if(!fitsBox(t, font, fs)){
          for(const tryFs of [36, 24, 20]){ if(tryFs <= fs && fitsBox(t, font, tryFs)){ fs = tryFs; break; } }
        }

        const boxW = L.sticky.w - INNER_PAD*2;
        const lines = wrapTextByWidthPreserveBreaks(t, font, fs, boxW);
        const lh = fs * 1.2;

        if(alignMode === 'center'){
          const totalH = lines.length * lh;
          const yStart = box.y + (L.sticky.h - totalH)/2 + (lines.length - 1)*lh;
          lines.forEach((ln, k) => {
            const w = font.widthOfTextAtSize(ln, fs);
            const x = box.x + (L.sticky.w - w) / 2;
            const y = yStart - k*lh;
            page.drawText(ln, { x, y, size: fs, font });
          });
        } else if(alignMode === 'left'){
          let y = box.y + L.sticky.h - INNER_PAD - fs;
          const x = box.x + INNER_PAD;
          lines.forEach((ln, k) => page.drawText(ln, { x, y: y - k*lh, size: fs, font }));
        } else { // right
          let y = box.y + L.sticky.h - INNER_PAD - fs;
          lines.forEach((ln, k) => {
            const w = font.widthOfTextAtSize(ln, fs);
            const x = box.x + L.sticky.w - INNER_PAD - w;
            page.drawText(ln, { x, y: y - k*lh, size: fs, font });
          });
        }
      });
    }

    const bytes = await pdf.save();
    const blob = new Blob([bytes], { type:'application/pdf' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'sticky-notes.pdf'; a.click();
    setTimeout(() => URL.revokeObjectURL(url), 10000);
  });

  // Keep the guides count accurate at init
  updateGuidesHint();


  // Subtle fade-in of the glass header when scrolling
  (function(){
    const hdr = document.querySelector('header');
    if(!hdr) return;
    const onScroll = () => {
      // add a small threshold so it doesn't flicker at the very top
      if (window.scrollY > 8) hdr.classList.add('scrolled');
      else hdr.classList.remove('scrolled');
    };
    window.addEventListener('scroll', onScroll, { passive: true });
    // initialize on load (in case the page is refreshed mid-scroll)
    onScroll();
  })();
  </script>
</body>
</html>